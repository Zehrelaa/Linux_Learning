
DATE 13/01/2024
Shikhar Gupta@Lenovo-SG MINGW64 ~
$ cd /e/vagrantvms/centos

Shikhar Gupta@Lenovo-SG MINGW64 /e/vagrantvms/centos
$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Checking if box 'eurolinux-vagrant/centos-stream-9' version '9.0.31' is up to date...
==> default: A newer version of the box 'eurolinux-vagrant/centos-stream-9' for provider 'virtualbox's
==> default: available! You currently have version '9.0.31'. The latest is version
==> default: '9.0.38'. Run `vagrant box update` to update.
==> default: Resuming suspended VM...
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
==> default: Machine booted and ready!
==> default: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==> default: flag to force provisioning. Provisioners marked to run always will still run.

Shikhar Gupta@Lenovo-SG MINGW64 /e/vagrantvms/centos
$ vagrant ssh
This box was generated by EuroLinux

Any suggestions are welcome at https://github.com/EuroLinux/cloud-images-rfc/

Happy using.
To delete this message use:
echo '' > /etc/motd
Last login: Fri Jan 12 18:42:47 2024 from 10.0.2.2
[vagrant@centos ~]$ sudo -i
[root@centos ~]# ls -l
total 8
-rw-------. 1 root root 2058 Dec 11 16:06 anaconda-ks.cfg
lrwxrwxrwx. 1 root root   37 Dec 11 15:50 cmds -> /opt/dev/ops/devops/test/commands.txt
drwxr-xr-x. 2 root root   31 Dec 11 16:09 devopsdir
-rw-------. 1 root root 1388 Oct 11 08:20 original-ks.cfg
[root@centos ~]# mkdir /opt/devopsdir
[root@centos ~]# ls -l/opt/
ls: invalid option -- '/'
Try 'ls --help' for more information.
[root@centos ~]# ls -l /opt/
total 0
drwxr-xr-x. 3 root root  17 Dec 11 15:32 dev
drwxr-xr-x. 2 root root   6 Jan 12 22:47 devopsdir
drwxr-xr-x. 8 root root 136 Oct 11 08:42 VBoxGuestAdditions-6.1.46
[root@centos ~]# groupadd devops
[root@centos ~]# groupadd ansible
[root@centos ~]# groupadd jenkins
[root@centos ~]# groupadd aws
[root@centos ~]# useradd ansible
useradd: group ansible exists - if you want to add this user to that group, use -g.
[root@centos ~]# exit
logout
[vagrant@centos ~]$ sudo -i
[root@centos ~]# mkdir /opt/devopsdir
mkdir: cannot create directory ‘/opt/devopsdir’: File exists
[root@centos ~]# rmdir devopsdir
rmdir: failed to remove 'devopsdir': Directory not empty
[root@centos ~]# rm -r devops
rm: cannot remove 'devops': No such file or directory
[root@centos ~]# rm -r devopsdir
rm: descend into directory 'devopsdir'? yes
rm: remove regular file 'devopsdir/mybootingfile.cfg'? yes
rm: remove directory 'devopsdir'? yes
[root@centos ~]# mkdir /opt/devopsdir
mkdir: cannot create directory ‘/opt/devopsdir’: File exists
[root@centos ~]# rm -r /devopsdir
rm: cannot remove '/devopsdir': No such file or directory
[root@centos ~]# ls -l
total 8
-rw-------. 1 root root 2058 Dec 11 16:06 anaconda-ks.cfg
lrwxrwxrwx. 1 root root   37 Dec 11 15:50 cmds -> /opt/dev/ops/devops/test/commands.txt
-rw-------. 1 root root 1388 Oct 11 08:20 original-ks.cfg
[root@centos ~]# mkdir /opt/devopsdir
mkdir: cannot create directory ‘/opt/devopsdir’: File exists
[root@centos ~]# groupadd devops
groupadd: group 'devops' already exists
[root@centos ~]# useradd ansible
useradd: group ansible exists - if you want to add this user to that group, use -g.
[root@centos ~]# useradd -g ansible
Usage: useradd [options] LOGIN
       useradd -D
       useradd -D [options]

Options:
      --badname                 do not check for bad names
  -b, --base-dir BASE_DIR       base directory for the home directory of the
                                new account
      --btrfs-subvolume-home    use BTRFS subvolume for home directory
  -c, --comment COMMENT         GECOS field of the new account
  -d, --home-dir HOME_DIR       home directory of the new account
  -D, --defaults                print or change default useradd configuration
  -e, --expiredate EXPIRE_DATE  expiration date of the new account
  -f, --inactive INACTIVE       password inactivity period of the new account
  -g, --gid GROUP               name or ID of the primary group of the new
                                account
  -G, --groups GROUPS           list of supplementary groups of the new
                                account
  -h, --help                    display this help message and exit
  -k, --skel SKEL_DIR           use this alternative skeleton directory
  -K, --key KEY=VALUE           override /etc/login.defs defaults
  -l, --no-log-init             do not add the user to the lastlog and
                                faillog databases
  -m, --create-home             create the user's home directory
  -M, --no-create-home          do not create the user's home directory
  -N, --no-user-group           do not create a group with the same name as
                                the user
  -o, --non-unique              allow to create users with duplicate
                                (non-unique) UID
  -p, --password PASSWORD       encrypted password of the new account
  -r, --system                  create a system account
  -R, --root CHROOT_DIR         directory to chroot into
  -P, --prefix PREFIX_DIR       prefix directory where are located the /etc/* files
  -s, --shell SHELL             login shell of the new account
  -u, --uid UID                 user ID of the new account
  -U, --user-group              create a group with the same name as the user
  -Z, --selinux-user SEUSER     use a specific SEUSER for the SELinux user mapping

[root@centos ~]# useradd -g --ansible
useradd: group '--ansible' does not exist
[root@centos ~]# useradd --g ansible
useradd: option '--g' is ambiguous; possibilities: '--gid' '--groups'
Usage: useradd [options] LOGIN
       useradd -D
       useradd -D [options]

Options:
      --badname                 do not check for bad names
  -b, --base-dir BASE_DIR       base directory for the home directory of the
                                new account
      --btrfs-subvolume-home    use BTRFS subvolume for home directory
  -c, --comment COMMENT         GECOS field of the new account
  -d, --home-dir HOME_DIR       home directory of the new account
  -D, --defaults                print or change default useradd configuration
  -e, --expiredate EXPIRE_DATE  expiration date of the new account
  -f, --inactive INACTIVE       password inactivity period of the new account
  -g, --gid GROUP               name or ID of the primary group of the new
                                account
  -G, --groups GROUPS           list of supplementary groups of the new
                                account
  -h, --help                    display this help message and exit
  -k, --skel SKEL_DIR           use this alternative skeleton directory
  -K, --key KEY=VALUE           override /etc/login.defs defaults
  -l, --no-log-init             do not add the user to the lastlog and
                                faillog databases
  -m, --create-home             create the user's home directory
  -M, --no-create-home          do not create the user's home directory
  -N, --no-user-group           do not create a group with the same name as
                                the user
  -o, --non-unique              allow to create users with duplicate
                                (non-unique) UID
  -p, --password PASSWORD       encrypted password of the new account
  -r, --system                  create a system account
  -R, --root CHROOT_DIR         directory to chroot into
  -P, --prefix PREFIX_DIR       prefix directory where are located the /etc/* files
  -s, --shell SHELL             login shell of the new account
  -u, --uid UID                 user ID of the new account
  -U, --user-group              create a group with the same name as the user
  -Z, --selinux-user SEUSER     use a specific SEUSER for the SELinux user mapping

[root@centos ~]# useradd -G ansible
Usage: useradd [options] LOGIN
       useradd -D
       useradd -D [options]

Options:
      --badname                 do not check for bad names
  -b, --base-dir BASE_DIR       base directory for the home directory of the
                                new account
      --btrfs-subvolume-home    use BTRFS subvolume for home directory
  -c, --comment COMMENT         GECOS field of the new account
  -d, --home-dir HOME_DIR       home directory of the new account
  -D, --defaults                print or change default useradd configuration
  -e, --expiredate EXPIRE_DATE  expiration date of the new account
  -f, --inactive INACTIVE       password inactivity period of the new account
  -g, --gid GROUP               name or ID of the primary group of the new
                                account
  -G, --groups GROUPS           list of supplementary groups of the new
                                account
  -h, --help                    display this help message and exit
  -k, --skel SKEL_DIR           use this alternative skeleton directory
  -K, --key KEY=VALUE           override /etc/login.defs defaults
  -l, --no-log-init             do not add the user to the lastlog and
                                faillog databases
  -m, --create-home             create the user's home directory
  -M, --no-create-home          do not create the user's home directory
  -N, --no-user-group           do not create a group with the same name as
                                the user
  -o, --non-unique              allow to create users with duplicate
                                (non-unique) UID
  -p, --password PASSWORD       encrypted password of the new account
  -r, --system                  create a system account
  -R, --root CHROOT_DIR         directory to chroot into
  -P, --prefix PREFIX_DIR       prefix directory where are located the /etc/* files
  -s, --shell SHELL             login shell of the new account
  -u, --uid UID                 user ID of the new account
  -U, --user-group              create a group with the same name as the user
  -Z, --selinux-user SEUSER     use a specific SEUSER for the SELinux user mapping

[root@centos ~]# useradd -d -g ansible
useradd: invalid home directory '-g'
[root@centos ~]# useradd -d -G ansible
useradd: invalid home directory '-G'
[root@centos ~]# cd /opt/devopsdir
[root@centos devopsdir]# ls -l
total 0
[root@centos devopsdir]# rm groupadd devops
rm: cannot remove 'groupadd': No such file or directory
rm: cannot remove 'devops': No such file or directory
[root@centos devopsdir]# cd /opt/devopsdir
[root@centos devopsdir]# mkdir /opt/devopsdir
mkdir: cannot create directory ‘/opt/devopsdir’: File exists
[root@centos devopsdir]# exit
logout
[vagrant@centos ~]$ -l /opt/
-bash: -l: command not found
[vagrant@centos ~]$ ls -l/opt/
ls: invalid option -- '/'
Try 'ls --help' for more information.
[vagrant@centos ~]$ ls -l /opt/
total 0
drwxr-xr-x. 3 root root  17 Dec 11 15:32 dev
drwxr-xr-x. 2 root root   6 Jan 12 22:47 devopsdir
drwxr-xr-x. 8 root root 136 Oct 11 08:42 VBoxGuestAdditions-6.1.46
[vagrant@centos ~]$ groupadd devops
groupadd: group 'devops' already exists
[vagrant@centos ~]$ usermod -G devops ansible
usermod: user 'ansible' does not exist
[vagrant@centos ~]$ groupadd devops
groupadd: group 'devops' already exists
[vagrant@centos ~]$ grep devops /etc/group
devops:x:1001:
[vagrant@centos ~]$ usermod -aG devops ansible
usermod: user 'ansible' does not exist
[vagrant@centos ~]$ groups ansble
groups: ‘ansble’: no such user
[vagrant@centos ~]$ useradd ansible
useradd: group ansible exists - if you want to add this user to that group, use -g.
[vagrant@centos ~]$ ^C
[vagrant@centos ~]$

Shikhar Gupta@Lenovo-SG MINGW64 /e/vagrantvms/centos
$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Checking if box 'eurolinux-vagrant/centos-stream-9' version '9.0.31' is up to date...
==> default: A newer version of the box 'eurolinux-vagrant/centos-stream-9' for provider 'virtualbox's
==> default: available! You currently have version '9.0.31'. The latest is version
==> default: '9.0.38'. Run `vagrant box update` to update.
==> default: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==> default: flag to force provisioning. Provisioners marked to run always will still run.

Shikhar Gupta@Lenovo-SG MINGW64 /e/vagrantvms/centos
$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Checking if box 'eurolinux-vagrant/centos-stream-9' version '9.0.31' is up to date...
==> default: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==> default: flag to force provisioning. Provisioners marked to run always will still run.

Shikhar Gupta@Lenovo-SG MINGW64 /e/vagrantvms/centos
$  vagrant ssh
This box was generated by EuroLinux

Any suggestions are welcome at https://github.com/EuroLinux/cloud-images-rfc/

Happy using.
To delete this message use:
echo '' > /etc/motd
Last login: Fri Jan 12 20:51:01 2024 from 10.0.2.2
[vagrant@centos ~]$ sudo -i
[root@centos ~]# ls -l
total 8
-rw-------. 1 root root 2058 Dec 11 16:06 anaconda-ks.cfg
lrwxrwxrwx. 1 root root   37 Dec 11 15:50 cmds -> /opt/dev/ops/devops/test/commands.txt
-rw-------. 1 root root 1388 Oct 11 08:20 original-ks.cfg
[root@centos ~]# mkdir /opt/devopsdir
mkdir: cannot create directory ‘/opt/devopsdir’: File exists
[root@centos ~]# ls -l /opt/
total 0
drwxr-xr-x. 3 root root  17 Dec 11 15:32 dev
drwxr-xr-x. 2 root root   6 Jan 12 22:47 devopsdir
drwxr-xr-x. 8 root root 136 Oct 11 08:42 VBoxGuestAdditions-6.1.46
[root@centos ~]# gropuadd devops
-bash: gropuadd: command not found
[root@centos ~]# groupadd devops
groupadd: group 'devops' already exists
[root@centos ~]# useradd aws
useradd: group aws exists - if you want to add this user to that group, use -g.
[root@centos ~]# useradd -ag aws
useradd: invalid option -- 'a'
Usage: useradd [options] LOGIN
       useradd -D
       useradd -D [options]

Options:
      --badname                 do not check for bad names
  -b, --base-dir BASE_DIR       base directory for the home directory of the
                                new account
      --btrfs-subvolume-home    use BTRFS subvolume for home directory
  -c, --comment COMMENT         GECOS field of the new account
  -d, --home-dir HOME_DIR       home directory of the new account
  -D, --defaults                print or change default useradd configuration
  -e, --expiredate EXPIRE_DATE  expiration date of the new account
  -f, --inactive INACTIVE       password inactivity period of the new account
  -g, --gid GROUP               name or ID of the primary group of the new
                                account
  -G, --groups GROUPS           list of supplementary groups of the new
                                account
  -h, --help                    display this help message and exit
  -k, --skel SKEL_DIR           use this alternative skeleton directory
  -K, --key KEY=VALUE           override /etc/login.defs defaults
  -l, --no-log-init             do not add the user to the lastlog and
                                faillog databases
  -m, --create-home             create the user's home directory
  -M, --no-create-home          do not create the user's home directory
  -N, --no-user-group           do not create a group with the same name as
                                the user
  -o, --non-unique              allow to create users with duplicate
                                (non-unique) UID
  -p, --password PASSWORD       encrypted password of the new account
  -r, --system                  create a system account
  -R, --root CHROOT_DIR         directory to chroot into
  -P, --prefix PREFIX_DIR       prefix directory where are located the /etc/* files
  -s, --shell SHELL             login shell of the new account
  -u, --uid UID                 user ID of the new account
  -U, --user-group              create a group with the same name as the user
  -Z, --selinux-user SEUSER     use a specific SEUSER for the SELinux user mapping

[root@centos ~]# useradd LOGIN
[root@centos ~]# useradd -D aws
Usage: useradd [options] LOGIN
       useradd -D
       useradd -D [options]

Options:
      --badname                 do not check for bad names
  -b, --base-dir BASE_DIR       base directory for the home directory of the
                                new account
      --btrfs-subvolume-home    use BTRFS subvolume for home directory
  -c, --comment COMMENT         GECOS field of the new account
  -d, --home-dir HOME_DIR       home directory of the new account
  -D, --defaults                print or change default useradd configuration
  -e, --expiredate EXPIRE_DATE  expiration date of the new account
  -f, --inactive INACTIVE       password inactivity period of the new account
  -g, --gid GROUP               name or ID of the primary group of the new
                                account
  -G, --groups GROUPS           list of supplementary groups of the new
                                account
  -h, --help                    display this help message and exit
  -k, --skel SKEL_DIR           use this alternative skeleton directory
  -K, --key KEY=VALUE           override /etc/login.defs defaults
  -l, --no-log-init             do not add the user to the lastlog and
                                faillog databases
  -m, --create-home             create the user's home directory
  -M, --no-create-home          do not create the user's home directory
  -N, --no-user-group           do not create a group with the same name as
                                the user
  -o, --non-unique              allow to create users with duplicate
                                (non-unique) UID
  -p, --password PASSWORD       encrypted password of the new account
  -r, --system                  create a system account
  -R, --root CHROOT_DIR         directory to chroot into
  -P, --prefix PREFIX_DIR       prefix directory where are located the /etc/* files
  -s, --shell SHELL             login shell of the new account
  -u, --uid UID                 user ID of the new account
  -U, --user-group              create a group with the same name as the user
  -Z, --selinux-user SEUSER     use a specific SEUSER for the SELinux user mapping

[root@centos ~]# useradd -D -G aws
Usage: useradd [options] LOGIN
       useradd -D
       useradd -D [options]

Options:
      --badname                 do not check for bad names
  -b, --base-dir BASE_DIR       base directory for the home directory of the
                                new account
      --btrfs-subvolume-home    use BTRFS subvolume for home directory
  -c, --comment COMMENT         GECOS field of the new account
  -d, --home-dir HOME_DIR       home directory of the new account
  -D, --defaults                print or change default useradd configuration
  -e, --expiredate EXPIRE_DATE  expiration date of the new account
  -f, --inactive INACTIVE       password inactivity period of the new account
  -g, --gid GROUP               name or ID of the primary group of the new
                                account
  -G, --groups GROUPS           list of supplementary groups of the new
                                account
  -h, --help                    display this help message and exit
  -k, --skel SKEL_DIR           use this alternative skeleton directory
  -K, --key KEY=VALUE           override /etc/login.defs defaults
  -l, --no-log-init             do not add the user to the lastlog and
                                faillog databases
  -m, --create-home             create the user's home directory
  -M, --no-create-home          do not create the user's home directory
  -N, --no-user-group           do not create a group with the same name as
                                the user
  -o, --non-unique              allow to create users with duplicate
                                (non-unique) UID
  -p, --password PASSWORD       encrypted password of the new account
  -r, --system                  create a system account
  -R, --root CHROOT_DIR         directory to chroot into
  -P, --prefix PREFIX_DIR       prefix directory where are located the /etc/* files
  -s, --shell SHELL             login shell of the new account
  -u, --uid UID                 user ID of the new account
  -U, --user-group              create a group with the same name as the user
  -Z, --selinux-user SEUSER     use a specific SEUSER for the SELinux user mapping

[root@centos ~]# useradd miles
[root@centos ~]# vim /etc/group
[root@centos ~]# id ansible
id: ‘ansible’: no such user
[root@centos ~]# vim /etc/group
[root@centos ~]# ls -ld /opt/devopsdir
drwxr-xr-x. 2 root root 6 Jan 12 22:47 /opt/devopsdir
[root@centos ~]#  chown -R ansible:devops /opt/devopsdir
chown: invalid user: ‘ansible:devops’
[root@centos ~]# useradd ansible
useradd: group ansible exists - if you want to add this user to that group, use -g.
[root@centos ~]# rm ansible
rm: cannot remove 'ansible': No such file or directory
[root@centos ~]# rm group ansible
rm: cannot remove 'group': No such file or directory
rm: cannot remove 'ansible': No such file or directory
[root@centos ~]# groupdel ansible
[root@centos ~]# groupdel jenkins
[root@centos ~]# groupdel aws
[root@centos ~]# useradd ansible
[root@centos ~]# useradd jenkins
[root@centos ~]# useradd aws
Creating mailbox file: File exists
[root@centos ~]# vim /etc/group
[root@centos ~]# chown -R ansible:devops /opt/devopsdir
[root@centos ~]# ls -ld /opt/devopsdir
drwxr-xr-x. 2 ansible devops 6 Jan 12 22:47 /opt/devopsdir
[root@centos ~]# chmod o-x /opt/devopsdir
[root@centos ~]# ls -ld /opt/devopsdir
drwxr-xr--. 2 ansible devops 6 Jan 12 22:47 /opt/devopsdir
[root@centos ~]# chmod o-r /opt/devopsdir
[root@centos ~]# ls -ld /opt/devvopsdir
ls: cannot access '/opt/devvopsdir': No such file or directory
[root@centos ~]# ls -ld /opt/devopsdir
drwxr-x---. 2 ansible devops 6 Jan 12 22:47 /opt/devopsdir
[root@centos ~]# chmod g+w /opt/devopsdir
[root@centos ~]# ls -ld/opt/devopsdir
ls: invalid option -- '/'
Try 'ls --help' for more information.
[root@centos ~]# ls -ld /opt/devopsdir
drwxrwx---. 2 ansible devops 6 Jan 12 22:47 /opt/devopsdir
[root@centos ~]# su - miles
[miles@centos ~]$ ls /opt/devopsdir
ls: cannot open directory '/opt/devopsdir': Permission denied
[miles@centos ~]$ cd /opt/devopsdir
-bash: cd: /opt/devopsdir: Permission denied
[miles@centos ~]$ touch /opt/devopsdir/test1
touch: cannot touch '/opt/devopsdir/test1': Permission denied
[miles@centos ~]$ su - aws
Password:
Password:


su: Authentication failure
[miles@centos ~]$
[miles@centos ~]$
[miles@centos ~]$ exit
logout
[root@centos ~]# su - aws
Last failed login: Sat Jan 13 03:22:39 UTC 2024 on pts/1
There was 1 failed login attempt since the last successful login.
[aws@centos ~]$ id
uid=1005(aws) gid=1007(aws) groups=1007(aws),1001(devops) context=unconfined_u:unconfined_r:unconfinet:s0-s0:c0.c1023
[aws@centos ~]$ ls /opt/devopsdir/
[aws@centos ~]$ cd /opt/devopsdir/
[aws@centos devopsdir]$ touch awwsfiles
[aws@centos devopsdir]$ ls
awwsfiles
[aws@centos devopsdir]$ cd..
-bash: cd..: command not found
[aws@centos devopsdir]$ ls -l
total 0
-rw-r--r--. 1 aws aws 0 Jan 13 03:24 awwsfiles
[aws@centos devopsdir]$ ls
awwsfiles
[aws@centos devopsdir]$ cd ..
[aws@centos opt]$ ls -l
total 0
drwxr-xr-x. 3 root    root    17 Dec 11 15:32 dev
drwxrwx---. 2 ansible devops  23 Jan 13 03:24 devopsdir
drwxr-xr-x. 8 root    root   136 Oct 11 08:42 VBoxGuestAdditions-6.1.46
[aws@centos opt]$ exit
logout
[root@centos ~]# chown aws.dvops /opt/webdata
chown: invalid user: ‘aws.dvops’
[root@centos ~]# chown aws.devops /opt/webdata
chown: cannot access '/opt/webdata': No such file or directory
[root@centos ~]# mkdir /opt/webdata
[root@centos ~]# ls -ld /opt/webdata
drwxr-xr-x. 2 root root 6 Jan 13 03:28 /opt/webdata
[root@centos ~]# chown aws.devops /opt/webdata
[root@centos ~]# ls -ld /opt/webdata/
drwxr-xr-x. 2 aws devops 6 Jan 13 03:28 /opt/webdata/
[root@centos ~]# chmod -R 770 /opt/webdata
[root@centos ~]# ls -ld /opt/webdata
drwxrwx---. 2 aws devops 6 Jan 13 03:28 /opt/webdata
[root@centos ~]# chmod -r 754 /opt/webdata/
chmod: cannot access '754': No such file or directory
[root@centos ~]# chmod -R 754 /opt/webdata
[root@centos ~]# ls -ld /opt/webdata
drwxr-xr--. 2 aws devops 6 Jan 13 03:28 /opt/webdata
[root@centos ~]# ^C
[root@centos ~]#

Shikhar Gupta@Lenovo-SG MINGW64 /e/vagrantvms/centos
Hello Stoicmann
 